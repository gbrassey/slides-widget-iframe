<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>How to Build an Easy Embedabble Widget</title>

		<meta name="description" content="How to Build an Easy Embeddable Widget">
		<meta name="author" content="George Brassey">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>How to Build an Easy Embedabble Widget</h1>
					<p>
						<small>by <a href="http://www.gbrassey.com">George Brassey</a></small>
					</p>
				</section>

				<section>
					<h2>Bug Tracker</h2>
					<h3>Front end widget for collecting bugs — fly trap</h3>
					<ul>
						<li>Simple interface for clients to comunicate issues</li>
						<li>Provides additional information, such as:
							<ul>
								<li>Screen Size</li>
								<li>Operating System</li>
								<li>Browser information</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>Requirements</h2>
					<ul>
						<li>Unobtrusive
							<ul>
								<li>Hide when not in use</li>
								<li>Slide into place when called</li>
							</ul>
						</li>
						<li>Outside the flow of the DOM</li>
						<li>Responsive</li>
						<li>Sandboxed so that it doesn’t cause any conflicts with the project DOM, JS or CSS</li>
						<li>Deploy once and implemente across many projects</li>
					</ul>
				</section>

				<section>
					<h2>Design</h2>
					<ul>
						<li>Bug tracker sits inconspicuosly in the bottom left corner</li>
						<li>Dynamic — form slides into view when necessary</li>
						<li>Fixed to the bottom left corner of the viewport</li>
						<li>Responsive to fit on all device sizes</li>
					</ul>
				</section>

				<section>
					<h2>Iframe</h2>
					<h3>Create instance of child document within the context of the parent</h3>
					<ul>
						<li>Parent: Project under bug tracking</li>
						<li>Child: Bug tracking widget</li>
					</ul>
				</section>

				<section>
					<h2>Iframes — The Good</h2>
					<ul>
						<li>Sandboxes - protects from conflict and spillover</li>
					</ul>
				</section>

				<section>
					<h2>Iframes — The Bad</h2>
					<ul>
						<li>Cross-origin policy blocks communication between parent and child documents</li>
						<ul>
							<li>Unable to receive necessary information from the child</li>
						</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>HTML5 postMessage</h2>
					<ul>
						<li>Method to send messages between documents</li>
						<li>New specification. Does not work on older browsers</li>
					</ul>
				</section>

				<section>
					<h2>Remote Procedure Call (RPC) and easyXDM</h2>
					<ul>
						<li><a href="http://en.wikipedia.org/wiki/Remote_procedure_call">RPC</a> — protocol for <q>remote invocation</q></li>
						<li><a href="http://easyxdm.net">easyXDM</a> — a library that leverages RPC for cross origin communication between parent and child
							<ul>
								<li>Methods can be made open to the other context</li>
								<li>Eg. The child can initiate a method which will run in the parent and wait for return value</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>Using easyXDM</h2>
					<ul>
						<li>In our parent we load a script from our bug tracker server
							<ul>
								<li>AJAX easyXDM library for use in our parent context</li>
							</ul>
						</li>
						<li>Instantiate an RPC instance with methods to be used by the child</li>
					</ul>
				</section>

				<section>
					<h2>Creating the Iframe</h2>
					<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
var iframeContainer = document.createElement('div');

document.getElementsByTagName('body')[0].appendChild(iframeContainer);

var rpc = new easyXDM.Rpc({
	remote: 'http://www.example.com/my-iframe',
	container: iframeContainer,
	props: {
		id: 'bug-iframe',
		frameborder: '0',
		scrolling: 'no',
		allowTransparency: 'true',
		style: {
			height: '100%',
			width: '100%',
			display: 'block'
		}
	}
},
{
	local: {
        parentInfo: function () {
        	return {
        		width: window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,
        		height: window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight,
        		url: window.location.href
        	};
        }
    }
});
					</code></pre>
				</section>

				<section>
					<h2>... And on the child side</h2>
					<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
var rpc = new easyXDM.Rpc({},
{
    remote: {
        resizeiFrame: {},
        parentInfo: {}
    }
});

.
.
.

rpc.parentInfo(function(parentInfo) {
    var diagObject = {
        'width' = parentInfo.width,
        'height' = parentInfo.height,
        'url' = parentInfo.url
    }
});
					</code></pre>
				</section>

				<section>
					<h2>Why is Cross Domain Important?</h2>
					<ul>
						<li>Can be used to embed foreign services within your website, webapp, native app</li>
						<li>Context aware services will be better when they can communicate with their parent</li>
					</ul>
				</section>

				<section>
					<h2>Further Reading</h2>
					<img width="831" height="442" src="images/card-ui.png" alt="Card UI">
					<ul>
						<li><a href="http://www.subtraction.com/2014/08/26/what-is-a-card/">Card UI</a> is a common design pattern
							<ul>
								<li>Twitter</li>
								<li>Pinterest</li>
								<li>Google Now</li>
							</ul>
						</li>
						<li><a href="http://cardstack.io">cardstack.io</a> is an open source initiative to create a Card Ecosystem
							<ul>
								<li><a href="https://github.com/tildeio/oasis.js">Oasis.js</a> — <q>A lightweight library for embedding untrusted content and exposing capabilities</q></li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>The End</h2>
					<p>by <a href="http://www.gbrassey.com">George Brassey</a></p>
				</section>


			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
